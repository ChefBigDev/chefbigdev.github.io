<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR</title>
    <meta name="description" content="CINEMA">
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
    <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>
    
    <!-- Cube selector properties -->
    <script id="link" type="text/html">
      <a-entity class="link"
        geometry="primitive: box; width: 0.35; height: 0.35; depth: 0.35"
        material="src: ${thumb}"
        animation="property: rotation; from: 0 0 0; to: 360 180 0; dur: 10000; easing: linear; loop: true"
        event-set__mouseenter="scale: 1.1 1.1 1.1;"
        event-set__mouseleave="scale: 1 1 1"
        event-set__click="_target: #image-360; _delay: 300; material.src: ${src}"
        proxy-event="event: click; to: #image-360; as: fade">
      </a-entity>
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <!-- Images -->
        <img id="bg" crossorigin="anonymous" src="assets/bg.jpg">
        <img id="one" crossorigin="anonymous" src="assets/cat1.jpg">
        <img id="two" crossorigin="anonymous" src="assets/cat2.jpg">
        <!-- 3D Models -->
        <a-asset-item id="chair" src="assets/chair/scene.gltf"></a-asset-item>
        <a-asset-item id="table" src="assets/table/scene.gltf"></a-asset-item>
        <a-asset-item id="char" src="assets/char/scene.gltf"></a-asset-item>
        <a-asset-item id="gun" src="assets/gun/scene.gltf"></a-asset-item>
        <a-asset-item id="popcorn" src="assets/popcorn/scene.gltf"></a-asset-item>
        <a-asset-item id="rug" src="assets/rug/scene.gltf"></a-asset-item>
        <a-asset-item id="curtains" src="assets/curtains/scene.gltf"></a-asset-item>
      </a-assets>

      <!-- Sky dome and lighting -->
      <a-sky radius="10" src="#bg" animation__fade="property: components.material.material.color; type: color; from: #FFF; to: #000; dur: 300; startEvents: fade" animation__fadeback="property: components.material.material.color; type: color; from: #000; to: #FFF; dur: 300; startEvents: animationcomplete__fade" rotation="0 -90 0"></a-sky>
      <a-light type="ambient" color="white"></a-light>
      <a-light color="white" position="0.025 1.279 0.000"></a-light>

      <!-- Helper text above display screen -->
      <a-entity geometry="primitive: plane; width: 3; height: auto" text="value: !Videos don't work on mobile!;" color="white" position="0 2.35 -3"></a-entity>
      <a-entity geometry="primitive: plane; width: 3; height: auto" text="value: Hover over cube to select:;" color="white" position="0 2.15 -3"></a-entity>

      <!-- Image/video display screen and 3D scene models -->
      <a-plane id="image-360" src="assets/default.jpg" height="3" width="4" position="0 0 -3" autoplay="true"></a-plane>
      <a-entity gltf-model="#chair" position="0 -0.45 0" rotation="0 90 0"></a-entity>
      <a-entity gltf-model="#table" position="0 -0.45 -0.75" scale="0.3 0.3 0.3" rotation="0 90 0"></a-entity>
      <a-entity gltf-model="#char" position="0.10 -0.35 -0.75" scale="0.001 0.001 0.001"></a-entity>
      <a-entity gltf-model="#gun" position="-0.15 -0.33 -0.65" rotation="90 195 0" scale="0.01 0.01 0.01"></a-entity>
      <a-entity gltf-model="#popcorn" position="-0.35 -0.330 -0.100" rotation="0 130 0" scale="0.035 0.035 0.035"></a-entity>
      <a-entity gltf-model="#rug" position="-0 -1 -1.216" rotation="0 90 0" scale="0.025 0.025 0.025"></a-entity>
      <a-entity gltf-model="#curtains" position="-1.77 -1.30 -2.65" rotation="0 90 0" scale="0.5 0.40 0.075"></a-entity>
      <a-entity gltf-model="#curtains" position="3.08 -1.39 -2.7" rotation="0 90 0" scale="0.5 0.42 0.075"></a-entity>
      <a-cylinder color="crimson"  height="6.75" radius="0.05" position="0 1.4 -2.914" rotation="90 90 0"></a-cylinder>

      <!-- Selector cubes -->
      <a-entity id="links" layout="margin: 0.5; columns: 2" position="-0.25 1.60 -2.75">
        <a-entity template="src: #link" data-src="#one" data-thumb="#one">
          <a-entity class="link"></a-entity>
        </a-entity>

        <a-entity template="src: #link" data-src="#two" data-thumb="#two">
          <a-entity class="link"></a-entity>
        </a-entity>
      </a-entity>

      <!-- Camera and cursor control -->
      <a-entity camera look-controls position="0 0 0">
        <a-cursor
          id="cursor"
          animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
          animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
          event-set__mouseenter="_event: mouseenter; color: springgreen"
          event-set__mouseleave="_event: mouseleave; color: black"
          raycaster="objects: .link"></a-cursor>
      </a-entity>
    </a-scene>
  </body>
</html>